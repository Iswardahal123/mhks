<div>
  <h2>Dashboard</h2>
  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>Name</th>
        </tr>
      </thead>
      <tbody id="dashboard-table-body"></tbody>
    </table>
  </div>
</div>

<script type="module">
  // Firebase imports
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCyibssZJsYwzI_2VXwC98iUGix2IkFczM",
    authDomain: "iswar-121d6.firebaseapp.com",
    projectId: "iswar-121d6",
    storageBucket: "iswar-121d6.appspot.com",
    messagingSenderId: "696246777134",
    appId: "1:696246777134:web:065951d401a56d8c7d76bf",
    measurementId: "G-HG807RGEGJ"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  async function loadDashboardData() {
    const tableBody = document.getElementById("dashboard-table-body");
    tableBody.innerHTML = "";

    // Load data from 'members' collection or use default names (as discussed)
    const membersRef = collection(db, "members");
    const snapshot = await getDocs(membersRef);

    if (snapshot.empty) {
      // fallback static list if no firestore data
      const names = [
        'Bikash Sitola','Durga Sharmah','Purna Chapagain','Raju Bajgain','Krishna Bajgain','Baburam Ram Poudel',
        'Tanka Boral','Churamoni Ojha','Bikash Koirala','Dipak Koirala','Bhuban Sharmah','Tilaram Boral','Shyam Gurung',
        'Binod Porajuli','Bhuban Sapkota','Surja Poudel','Khemraj Poudel','Prem Poudel','Rupnarayan Sitola',
        'Keshab gajurel','Kishore Dahal','Khemraj Rijal','Sagar Sapkota','Lila Timsina','Ganesh Karki',
        'Man Br Rai','Man Br Subba','Ganesh Dhungana','Hari Singh Mohora','Ram br basnet','Debi Prashad Dhakal',
        'Sekhar Sharmah','Ramlal Dhakal','Durga timsina','mahadev'
      ];

      names.forEach(name => {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${name}</td>`;
        tableBody.appendChild(tr);
      });
    } else {
      snapshot.forEach(doc => {
        const data = doc.data();
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${data.name || doc.id}</td>`;
        tableBody.appendChild(tr);
      });
    }
  }

  loadDashboardData();
</script>

<style>
  .table-wrapper {
    max-height: 400px;
    overflow-y: auto;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    padding-bottom: 60px;
    margin-top: 10px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
  }

  th, td {
    padding: 12px;
    border-bottom: 1px solid #ddd;
    font-size: 14px;
    text-align: left;
  }

  th {
    background-color: #f2f2f2;
    font-weight: bold;
  }
</style>

